---
import { getGlobalStats } from '../../lib/data-service';
import { formatMoney, formatNumber } from '../../lib/format';

const { totalSpend, totalLeads, avgCPL } = await getGlobalStats({ year: "2026", month: 1 });
const roas = 3.4; 
---

<div class="flex md:grid md:grid-cols-4 gap-4 mb-4 overflow-x-auto snap-x snap-mandatory pb-4 md:pb-0 -mx-4 px-4 md:mx-0 md:px-0 no-scrollbar">
    
    <div class="min-w-[85%] md:min-w-0 snap-center bg-white p-5 rounded-xl border border-zinc-200 shadow-sm flex flex-col justify-between h-32 relative overflow-hidden shrink-0">
        <span class="text-[10px] font-bold uppercase tracking-widest text-zinc-400">Gasto Global</span>
        <div>
            <span class="text-3xl font-black text-zinc-900 tracking-tight">{formatMoney(totalSpend)}</span>
            <div class="text-xs font-medium text-emerald-600 mt-1 flex items-center gap-1">
                <i class="fa-solid fa-arrow-trend-up"></i> 12.3% vs mes ant.
            </div>
        </div>
        <div class="absolute -right-4 -bottom-4 text-zinc-50 opacity-50 pointer-events-none">
            <i class="fa-solid fa-wallet text-8xl"></i>
        </div>
    </div>

    <div class="min-w-[85%] md:min-w-0 snap-center bg-white p-5 rounded-xl border border-zinc-200 shadow-sm flex flex-col justify-between h-32 shrink-0">
        <span class="text-[10px] font-bold uppercase tracking-widest text-zinc-400">Leads Globales</span>
        <div>
            <span class="text-3xl font-black text-zinc-900 tracking-tight">{formatNumber(totalLeads)}</span>
            <div class="text-xs font-medium text-emerald-600 mt-1 flex items-center gap-1">
                <i class="fa-solid fa-arrow-trend-up"></i> 8.7% vs mes ant.
            </div>
        </div>
    </div>

    <div class="min-w-[85%] md:min-w-0 snap-center bg-white p-5 rounded-xl border border-zinc-200 shadow-sm flex flex-col justify-between h-32 shrink-0">
        <span class="text-[10px] font-bold uppercase tracking-widest text-zinc-400">CPL Promedio</span>
        <div>
            <span class="text-3xl font-black text-zinc-900 tracking-tight">{formatMoney(avgCPL)}</span>
            <div class="text-xs font-medium text-rose-500 mt-1 flex items-center gap-1">
                <i class="fa-solid fa-arrow-trend-up"></i> 3.1% vs mes ant.
            </div>
        </div>
    </div>

    <div class="min-w-[85%] md:min-w-0 snap-center bg-white p-5 rounded-xl border border-zinc-200 shadow-sm flex flex-col justify-between h-32 shrink-0">
        <span class="text-[10px] font-bold uppercase tracking-widest text-zinc-400">ROAS Est.</span>
        <div>
            <span class="text-3xl font-black text-zinc-900 tracking-tight">{roas}x</span>
            <div class="w-full bg-zinc-100 h-1.5 rounded-full mt-2 overflow-hidden">
                <div class="bg-purple-500 h-full w-[85%]"></div>
            </div>
        </div>
    </div>
</div>
